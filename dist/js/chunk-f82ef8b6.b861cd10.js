(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f82ef8b6"],{add2:function(e,t,a){"use strict";var o=a("d244"),n=a.n(o);n.a},afd4:function(e,t,a){"use strict";var o=a("b594"),n=a.n(o);n.a},b594:function(e,t,a){},d069:function(e){e.exports=JSON.parse('[{"code":"1901101000","label":"供婴幼儿食用的零售包装配方奶粉","label_en":"Powdered formulas prepared for infant use, put up for retail sale","unit":"千克","mfnTax":0.15,"normalTax":0.4,"tempTax":0.05,"consumptionTax":0,"valueAddedTax":0.13,"usTax":0.4,"remark":"","value":"1901101000"},{"code":"1901109000","label":"其他供婴幼儿食用的零售包装食品","label_en":"Other food prepared for infant use, put up for retail sale","unit":"千克","mfnTax":0.15,"normalTax":0.4,"tempTax":0.02,"consumptionTax":0,"valueAddedTax":0.13,"usTax":0.25,"remark":"","value":"1901109000"},{"code":"3304100091","label":"包装标注含量以重量计的其他唇用化妆品","label_en":"Other lip make-up preparations,packing lable,the content by weight","unit":"千克/件","mfnTax":0.05,"normalTax":1.5,"tempTax":-1,"consumptionTax":0.15,"valueAddedTax":0.13,"usTax":0.15,"remark":"消费税:完税价格≥10元/克的,税率为15%","value":"3304100091"},{"code":"3304100092","label":"包装标注含量以体积计的其他唇用化妆品","label_en":"Other lip make-up preparations,packing lable,the content by volume","unit":"千克/件","mfnTax":0.05,"normalTax":1.5,"tempTax":-1,"consumptionTax":0.15,"valueAddedTax":0.13,"usTax":0.15,"remark":"消费税:完税价格≥10元/毫升的,税率为15%","value":"3304100092"},{"code":"3304100093","label":"包装标注规格为“片”或“张”的其他唇用化妆品","label_en":"Other lip make-up preparations,packing lable,the specification by pieces","unit":"千克/件","mfnTax":0.05,"normalTax":1.5,"tempTax":-1,"consumptionTax":0.15,"valueAddedTax":0.13,"usTax":0.15,"remark":"消费税:完税价格≥10元/片(张)的,税率为15%","value":"3304100093"},{"code":"3305100090","label":"其他洗发剂(香波)","label_en":"Other shampoos","unit":"千克","mfnTax":0.03,"normalTax":1.5,"tempTax":0.02,"consumptionTax":0,"valueAddedTax":0.13,"usTax":0.13,"remark":"","value":"3305100090"},{"code":"4420109090","label":"其他木制小雕像及其他装饰品","label_en":"Statuettes and other ornaments of other wood","unit":"千克","mfnTax":0,"normalTax":1,"tempTax":-1,"consumptionTax":0,"valueAddedTax":0.13,"usTax":0.25,"remark":"","value":"4420109090"},{"code":"6117102000","label":"羊毛制披巾、头巾、围巾、披纱、面纱及类似品","label_en":"Knitted or crocheted shawls,scarves, mufflers,mantillas,veils,and the like , of wool","unit":"条/千克","mfnTax":0.06,"normalTax":1.3,"tempTax":-1,"consumptionTax":0,"valueAddedTax":0.13,"usTax":0.31,"remark":"","value":"6117102000"},{"code":"8510100000","label":"电动剃须刀","label_en":"Shavers, with self-contained electric motor","unit":"个/千克","mfnTax":0.08,"normalTax":1,"tempTax":-1,"consumptionTax":0,"valueAddedTax":0.13,"usTax":0.13,"remark":"","value":"8510100000"}]')},d244:function(e,t,a){},deb0:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"dialog_text_v2"}},[a("el-dialog",{staticClass:"setDialog",attrs:{title:e.$t("calculation.second_title"),visible:e.dialogVisible,width:"1080px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},e._l(e.formData,(function(t,o){return a("div",{key:o},[a("div",{class:o%2==0?"back_ji":"back_ou"},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t,inline:!0,"label-width":"98px"}},[a("el-form-item",{attrs:{label:e.$t("calculation.country")}},[a("el-autocomplete",{staticClass:"setInputWidth",attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.querySearchCountry,placeholder:e.$t("calculation.placeholder_country")},on:{select:function(a){return e.handleSelectCountry(t,o,a)}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[a("div",{staticClass:"code_code"},[e._v(e._s(e.$t("country."+o.iso)))])]}}],null,!0),model:{value:t.country,callback:function(a){e.$set(t,"country",a)},expression:"item.country"}})],1),a("el-form-item",{attrs:{label:e.$t("calculation.hscode")}},[a("el-autocomplete",{staticClass:"setInputWidth",attrs:{"popper-class":"select_option","fetch-suggestions":e.querySearchHscode,placeholder:e.$t("calculation.placeholder_hscode")},on:{select:function(a){return e.handleSelectHscode(t,o,a)}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[a("div",{staticClass:"code_label",staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e.itemName(o)))])]}}],null,!0),model:{value:t.hsCode,callback:function(a){e.$set(t,"hsCode",a)},expression:"item.hsCode"}})],1),a("el-form-item",{attrs:{prop:"cif",label:e.$t("calculation.cif"),rules:[{type:"number",message:"CIF must be a number"}]}},[a("el-input",{staticClass:"setInputWidth",attrs:{placeholder:"CIF (CNY)",prop:"cif"},on:{input:function(a){return e.handleCIFchange(t,o)}},model:{value:t.cif,callback:function(a){e.$set(t,"cif",e._n(a))},expression:"item.cif"}},[a("template",{slot:"append"},[e._v("RMB")])],2)],1),a("el-form-item",[a("span",{staticClass:"setspan"})]),a("el-form-item",{attrs:{label:e.$t("calculation.jinkoushui")}},[a("el-input",{staticClass:"setInputWidth",attrs:{disabled:"",placeholder:e.$t("calculation.wait_calculation")},model:{value:t.jinkoushui,callback:function(a){e.$set(t,"jinkoushui",a)},expression:"item.jinkoushui"}})],1),a("el-form-item",{attrs:{label:e.$t("calculation.zengzhishui")}},[a("el-input",{staticClass:"setInputWidth",attrs:{disabled:"",placeholder:e.$t("calculation.wait_calculation")},model:{value:t.zengzhishui,callback:function(a){e.$set(t,"zengzhishui",a)},expression:"item.zengzhishui"}})],1),a("el-form-item",[a("i",{staticClass:"el-icon-remove-outline dialog_text_v2_seticon",on:{click:function(t){return e.onDeleate(o)}}})])],1)],1),a("hr",{directives:[{name:"show",rawName:"v-show",value:e.formData.length>1,expression:"formData.length>1"}]})])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.formData.length>1,expression:"formData.length>1"}],staticClass:"chaxun_yijian"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:e.$t("calculation.all_cif")}},[a("el-input",{attrs:{disabled:"",placeholder:e.$t("calculation.wait_calculation")},model:{value:e.formInline.cif,callback:function(t){e.$set(e.formInline,"cif",t)},expression:"formInline.cif"}})],1),a("el-form-item",{attrs:{label:e.$t("calculation.all_jinkoushui")}},[a("el-input",{attrs:{disabled:"",placeholder:e.$t("calculation.wait_calculation")},model:{value:e.formInline.jinkoushui,callback:function(t){e.$set(e.formInline,"jinkoushui",t)},expression:"formInline.jinkoushui"}})],1),a("el-form-item",{attrs:{label:e.$t("calculation.all_zengzhishui")}},[a("el-input",{attrs:{disabled:"",placeholder:e.$t("calculation.wait_calculation")},model:{value:e.formInline.zengzhishui,callback:function(t){e.$set(e.formInline,"zengzhishui",t)},expression:"formInline.zengzhishui"}})],1)],1)],1),a("i",{staticClass:"dialog_text_v2_seticon el-icon-circle-plus-outline",on:{click:e.handleMore}}),a("div",{staticClass:"dialog_text_v2_section_word",on:{click:e.handleDaoRu}},[e._v(e._s(e.$t("itemtype.shangchuan_moban")))]),a("CalculationModal",{attrs:{dialogVisible:e.dialogDaoruVisible},on:{getFileContent:e.handleFileContent,onCancel:e.handleDaoRuClose}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleClose}},[e._v(e._s(e.$t("itemtype.another_ok")))])],1)],1)],1)])},n=[],l=(a("4de4"),a("c975"),a("a15b"),a("d81d"),a("a434"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("5530")),i=a("9225"),s=(a("caad"),function(e){console.log("countryCode: ",e);var t=["AF","BH","BD","BN","MM","KH","CY","KP","HK","IN","ID","IR","IQ","IL","JP","JO","KW","LA","LB","MO","MY","MV","MN","NP","OM","PK","PH","QA","SA","SG","KR","LK","SY","TH","TR","AE","YE","VN","CN","TW","TL","KZ","KG","TJ","TM","UZ","DZ","AO","BJ","BW","BI","CM","CV","CF","TD","CG","DJ","EG","GQ","ET","GA","GM","GH","GN","GW","CI","KE","LR","LY","MG","MW","ML","MR","MU","MA","MZ","NA","NE","NG","RW","SN","SL","SO","ZA","SD","TZ","TG","TN","UG","BF","CD","ZM","ZW","LS","SZ","ER","YT","SS","BE","DK","GB","DE","FR","IE","IT","LU","NL","GR","PT","ES","AL","AT","BG","FI","HU","IS","LI","MT","MC","NO","PL","RO","SM","SE","CH","EE","LV","LT","GE","AM","AZ","BY","MD","RU","UA","SI","HR","CZ","SK","MK","BA","FO","RS","ME","AG","AR","BB","BZ","BO","BR","CL","CO","DM","CR","CU","DO","EC","GD","GT","GY","HT","HN","JM","MX","NI","PA","PY","PE","PR","LC","VC","SV","SR","TT","UY","VE","KN","PM","CA","US","GL","AU","CK","FJ","NC","VU","NZ","PG","SB","TO","WS","FM","PF","WF"];return!!t.includes(e)}),c=function(e,t){if("us"===t.toLowerCase())return e.usTax;var a=s(t);return console.log("isMfn: ",a),!1===a?(console.log(e.normalTax),e.normalTax):e.tempTax>0?e.tempTax:e.mfnTax},u=function(e,t,a){var o=(e-0)*t,n=(e-0+o)/(1-a),l=n*a,i=o+l;return i},r=function(e,t,a){return console.log("price: ",e),console.log("importTax: ",t),console.log("valueAddedTaxRate: ",a),(e-0+t)*a},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticStyle:{"padding-bottom":"0px"},attrs:{top:"14vh",modal:!1,visible:e.dialogVisible,width:"440px","before-close":e.handleCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("getFile",{on:{getFileContent:e.handleFileContent}})],1)])],1)},h=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-done"},[a("div",{staticClass:"over"},[a("div",{staticClass:"file-upload"},[a("el-upload",{ref:"upload",staticClass:"setColor",attrs:{action:"/",drag:"",accept:".xlsx","on-change":e.upload,"show-file-list":!1,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("itemtype.drug_excel"))),a("br"),e._v(e._s(e.$t("itemtype.click_excel")))])])],1),a("div",{staticClass:"file-button"},[a("el-button",{staticClass:"file-button_download",attrs:{type:"text",icon:"el-icon-download"}},[a("a",{attrs:{name:"file",download:"test.xlsx",href:"test.xlsx"},on:{click:e.handleDownload}},[e._v(e._s(e.$t("itemtype.xiazai_moban")))])])],1)])])},m=[],p=a("1146"),C=a.n(p),x={components:{},data:function(){return{outputs:[]}},methods:{handleDownload:function(){this.$emit("ondownload")},upload:function(e,t){console.log("file",e),console.log("fileList",t);var a={0:e.raw};this.readExcel1(a)},readExcel1:function(e){var t=this;if(console.log(e),e.length<=0)return!1;if(!/\.(xls|xlsx)$/.test(e[0].name.toLowerCase()))return this.$Message.error("上传格式不正确，请上传xls或者xlsx格式"),!1;var a=new FileReader;a.onload=function(e){try{var a=e.target.result,o=C.a.read(a,{type:"binary"}),n=o.SheetNames,l=C.a.utils.sheet_to_json(o.Sheets[n[0]],{header:1});t.$emit("getFileContent",l);try{console.log(1)}catch(i){console.log(i)}t.$refs.upload.value=""}catch(s){return!1}},a.readAsBinaryString(e[0])}},beforeCreate:function(){},created:function(){}},b=x,g=(a("afd4"),a("2877")),T=Object(g["a"])(b,f,m,!1,null,"ea68aa00",null),v=T.exports,k={components:{getFile:v},props:{dialogVisible:{type:Boolean,default:!1}},methods:{handleCancel:function(){this.$emit("onCancel")},handleFileContent:function(e){this.$emit("getFileContent",e)}}},_=k,j=Object(g["a"])(_,d,h,!1,null,"8c14c102",null),y=j.exports,D=a("d069"),O={components:{CalculationModal:y},props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{hscode:D,adminDistricts:null,dialogDaoruVisible:!1,formData:[{country:"",countryIso:"",hsCode:"",cif:0,jinkou:"",jinkoushui:"",zengzhi:"",zengzhishui:"",hsCodeObj:null}],formInline:{jinkoushui:null,zengzhishui:null,cif:null}}},mounted:function(){console.log("hscode",this.hscode);var e=a("4d04"),t=a("9c11");console.log(t.default),console.log(e.default);var o=Object.keys(e.default),n=o.map((function(a){return{iso:a,name:e.default[a],nlname:t.default[a],value:a,pinyin:pinyinUtil.getPinyin(t.default[a]).split(" ").join(""),pinyinSuoxie:pinyinUtil.getFirstLetter(t.default[a])}}));console.log(n),this.adminDistricts=n},methods:{itemName:function(e){return"zh"===Object(i["b"])()?e.label:e.label_en},CalculationAllPrice:function(e){var t={jinkoushui:"",zengzhishui:"",cif:""};return e.map((function(e){t.cif=t.cif-0+(e.cif-0),t.jinkoushui=t.jinkoushui-0+(e.jinkoushui-0),t.zengzhishui=t.zengzhishui-0+(e.zengzhishui-0)})),t},CalculationGetCustomTaxRate:function(e){return console.log("arr: ",e),e.map((function(e){e.countryIso&&e.hsCode&&(e.jinkou=c(e.hsCodeObj,e.countryIso))})),e},CalculationImportTax:function(e,t,a){return u(e,t,a)},CalculateValueAddedTax:function(e,t,a){return r(e,t,a)},handleSelectCountry:function(e,t,a){console.log(e,t,a),e.countryIso=e.country,e.country=this.$t("country.".concat(e.country));var o=Object(l["a"])({},this.CalculationGetCustomTaxRate(this.formData)[t]);o.cif&&o.jinkou&&o.hsCodeObj&&(e.jinkoushui=this.CalculationImportTax(o.cif,o.jinkou,o.hsCodeObj.consumptionTax),e.zengzhishui=this.CalculateValueAddedTax(o.cif,e.jinkoushui,o.hsCodeObj.valueAddedTax),this.formInline=Object(l["a"])({},this.CalculationAllPrice(this.formData)))},handleSelectHscode:function(e,t,a){console.log(e,t,a),e.hsCodeObj=a;var o=Object(l["a"])({},this.CalculationGetCustomTaxRate(this.formData)[t]);o.cif&&o.jinkou&&o.hsCodeObj&&(e.jinkoushui=this.CalculationImportTax(o.cif,o.jinkou,o.hsCodeObj.consumptionTax),e.zengzhishui=this.CalculateValueAddedTax(o.cif,e.jinkoushui,o.hsCodeObj.valueAddedTax),console.log("item: ",e),this.formInline=Object(l["a"])({},this.CalculationAllPrice(this.formData))),console.log(e)},handleCIFchange:function(e,t){console.log(e,t),e.cif&&e.jinkou&&e.hsCodeObj&&(e.jinkoushui=this.CalculationImportTax(e.cif,e.jinkou,e.hsCodeObj.consumptionTax),e.zengzhishui=this.CalculateValueAddedTax(e.cif,e.jinkoushui,e.hsCodeObj.valueAddedTax),this.formInline=Object(l["a"])({},this.CalculationAllPrice(this.formData)))},createFilterCountry:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())||0===t.iso.toLowerCase().indexOf(e.toLowerCase())||0===t.nlname.toLowerCase().indexOf(e.toLowerCase())||0===t.pinyinSuoxie.toLowerCase().indexOf(e.toLowerCase())}},querySearchCountry:function(e,t){var a=this.adminDistricts,o=e?a.filter(this.createFilterCountry(e)):a;t(o)},createFilterHscode:function(e){return function(t){return 0===t.code.toLowerCase().indexOf(e.toLowerCase())||0===t.label.toLowerCase().indexOf(e.toLowerCase())}},querySearchHscode:function(e,t){var a=this.hscode,o=e?a.filter(this.createFilterHscode(e)):a;t(o)},handleClose:function(){this.$emit("onClose")},onSubmit:function(){console.log("hello world")},onDeleate:function(e){this.formData.splice(e,1),this.formInline=Object(l["a"])({},this.CalculationAllPrice(this.formData))},handleMore:function(){this.formData.push({country:"",countryIso:"",hsCode:"",cif:0,xiaofei:"",jinkou:""})},handleDaoRu:function(){this.dialogDaoruVisible=!0},handleDaoRuClose:function(){this.dialogDaoruVisible=!1},handleFileContent:function(e){var t=this;console.log(e);var a=[];a=e.filter((function(e,t){return 0!=t})),console.log("newfile: ",a);var o=[];a.map((function(e){var a={country:"",countryIso:"",hsCode:"",hsCodeObj:null,cif:""};e.map((function(e,o){4==o?(a.country=t.$t("country.".concat(e)),a.countryIso=e):2==o?(e=e.toString().replace(".",""),8==e.length&&(e+="00"),a.hsCode=e,t.hscode.map((function(t){return t.code==e?a.hsCodeObj=Object(l["a"])({},t):null}))):5==o&&(a.cif=0==e?"":e)})),o.push(a)}));for(var n=0;n<o.length;n++){for(var i=0,s=!1,c=!1,u=0;u<this.formData.length;u++){if(""==o[n].country&&(console.log(123),c=!0),o[n].country==this.formData[u].country){console.log("qqqqq"),this.formData[u].hsCode=o[n].hsCode,this.formData[u].cif=o[n].cif,s=!0;break}i=n}this.formData.length>1&&(this.formData[0].country||this.formData.splice(0,1)),s||c||this.formData.push(o[i])}this.formData.map((function(e){e.jinkou?e.zengzhi||(t.$set(e,"zengzhi",""),t.$set(e,"zengzhishui","")):(t.$set(e,"jinkou",""),t.$set(e,"jinkoushui",""))})),console.log("问题0"),console.log(this.formData),this.formData.splice(this.formData.length-1,1),this.formData=this.CalculationGetCustomTaxRate(this.formData),console.log("问题1"),this.formData.map((function(e){console.log("问题2"),e.cif&&e.jinkou&&e.hsCodeObj&&(console.log("问题3"),e.jinkoushui=t.CalculationImportTax(e.cif,e.jinkou,e.hsCodeObj.consumptionTax),e.zengzhishui=t.CalculateValueAddedTax(e.cif,e.jinkoushui,e.hsCodeObj.valueAddedTax))})),this.formInline=Object(l["a"])({},this.CalculationAllPrice(this.formData)),this.dialogDaoruVisible=!1}}},w=O,I=(a("add2"),Object(g["a"])(w,o,n,!1,null,null,null));t["default"]=I.exports}}]);