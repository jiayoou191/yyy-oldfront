(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18473a74"],{"7a9d":function(o,e,t){"use strict";var s=t("cdea"),a=t.n(s);a.a},9123:function(o,e,t){},b962:function(o,e,t){"use strict";t.r(e);var s=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("el-dialog",{staticClass:"goods-input-panel",attrs:{width:"700px",visible:o.chooseGoodsPanel,showClose:!1},on:{open:o.initGoodsData,close:o.closeGoodsData}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"title-cargo"},[o._v(o._s(o.$t("order.goods_info_title")))]),t("span",{staticClass:"title-download"})]),t("div",{staticClass:"goods-input-content"},[t("div",{staticClass:"goods-input-item"},[t("label",{staticClass:"input-label"},[o._v(o._s(o.$t("order.goods_type")))]),t("el-select",{staticClass:"goods-type",attrs:{placeholder:o.$t("order.goods_type_hint")},on:{change:o.handleChangeGoodsInfo},model:{value:o.goods.id,callback:function(e){o.$set(o.goods,"id",e)},expression:"goods.id"}},o._l(o.newGoodsListOption,(function(e,s){return t("el-option",{key:s,attrs:{label:o.$t("itemtype."+e.name),value:e.id}},[t("span",{staticStyle:{float:"left"},style:{color:s<6?"#555":"#999"}},[o._v(o._s(o.$t("itemtype."+e.name)))]),t("span",{staticStyle:{float:"right",color:"#999","font-size":"13px"}},[o._v(o._s(o.$t("itemtype."+e.intro)))])])})),1)],1),t("div",{staticClass:"el-dialog-div"},[1!==o.goods.type?[t("div",{staticClass:"goods-input-item top"},[t("label",{staticClass:"input-label"},[o._v(o._s(o.$t("order.goods_info")))]),t("div",{staticClass:"info-wrap"},[o.goodsData.length>0?o._l(o.goodsData,(function(e,s){return t("div",{key:s,staticClass:"info-item"},[t("div",{ref:"allCargoInform",refInFor:!0,staticStyle:{width:"495px"}},[t("el-autocomplete",{staticClass:"goods-name-input",attrs:{"fetch-suggestions":o.querySearch,"trigger-on-focus":!1,placeholder:o.$t("order.goods_info_hint")},model:{value:e.name,callback:function(t){o.$set(e,"name",t)},expression:"item.name"}}),t("el-input",{ref:"weight",refInFor:!0,staticClass:"setNewInput",attrs:{placeholder:o.$t("order.goods_volume_hint")},model:{value:e.volume,callback:function(t){o.$set(e,"volume",t)},expression:"item.volume"}},[t("template",{slot:"append"},[o._v("m³")])],2),t("el-input",{ref:"volume",refInFor:!0,attrs:{placeholder:o.$t("order.goods_weight_hint")},model:{value:e.weight,callback:function(t){o.$set(e,"weight",t)},expression:"item.weight"}},[t("template",{slot:"append"},[o._v("kg")])],2),s>0?t("i",{staticClass:"el-icon-remove-outline",on:{click:function(e){return o.handleDeleteGoodsItem(s)}}}):o._e()],1),t("div",{staticClass:"newGoods-file"})])})):o._e(),t("div",[t("i",{staticClass:"seticon el-icon-circle-plus-outline",on:{click:o.handleAddGoodsItem}}),t("div",{staticClass:"section_word",on:{click:o.handleAddPiLiang}},[o._v(o._s(o.$t("itemtype.shangchuan_moban")))])])],2)])]:o._e()],2)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"newGoods_button"},[t("el-button",{on:{click:o.hideGoodsPanel}},[o._v(o._s(o.$t("order.goods_cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:o.checkGoodsInfo}},[o._v(o._s(o.$t("order.goods_confirm")))])],1)]),t("modalFileExcel",{attrs:{dialogVisible:o.piliangIsShow},on:{getFileContent:o.handleFileContent,onCancel:o.handlePiLiangCancel}})],1)},a=[],n=(t("4de4"),t("c975"),t("d81d"),t("a434"),t("b0c0"),t("2909")),i=t("e0eb"),l=t("a165"),c=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("el-dialog",{staticStyle:{"padding-bottom":"0px"},attrs:{top:"14vh",modal:!1,visible:o.dialogVisible,width:"440px","before-close":o.handleCancel},on:{"update:visible":function(e){o.dialogVisible=e}}},[t("span",[t("getFile",{on:{getFileContent:o.handleFileContent}})],1)])],1)},d=[],r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"order-done"},[t("div",{staticClass:"over"},[t("div",{staticClass:"file-upload"},[t("el-upload",{ref:"upload",staticClass:"setColor",attrs:{action:"/",drag:"",accept:".xlsx","on-change":o.upload,"show-file-list":!1,"auto-upload":!1}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[o._v(o._s(o.$t("itemtype.drug_excel"))),t("br"),o._v(o._s(o.$t("itemtype.click_excel")))])])],1),t("div",{staticClass:"file-button"},[t("el-button",{staticClass:"file-button_download",attrs:{type:"text",icon:"el-icon-download"}},["en"!=o.$i18n.locale?t("a",{attrs:{name:"file",download:"shopModal.xlsx",href:"https://jyy-binary-storage.oss-cn-shanghai.aliyuncs.com/files/%E5%93%81%E5%90%8D%E6%A8%A1%E7%89%88.xlsx"},on:{click:o.handleDownload}},[o._v(o._s(o.$t("itemtype.xiazai_moban")))]):t("a",{attrs:{name:"file",download:"shopModal.xlsx",href:"https://jyy-binary-storage.oss-cn-shanghai.aliyuncs.com/files/cargo_template.xlsx"},on:{click:o.handleDownload}},[o._v(o._s(o.$t("itemtype.xiazai_moban")))])])],1)])])},h=[],g=t("1146"),u=t.n(g),f={components:{},data:function(){return{outputs:[]}},methods:{handleDownload:function(){this.$emit("ondownload")},upload:function(o,e){console.log("file",o),console.log("fileList",e);var t={0:o.raw};this.readExcel1(t)},readExcel1:function(o){var e=this;if(console.log(o),o.length<=0)return!1;if(!/\.(xls|xlsx)$/.test(o[0].name.toLowerCase()))return this.$Message.error("上传格式不正确，请上传xls或者xlsx格式"),!1;var t=new FileReader;t.onload=function(o){try{var t=o.target.result,s=u.a.read(t,{type:"binary"}),a=s.SheetNames,n=u.a.utils.sheet_to_json(s.Sheets[a[0]],{header:1});e.$emit("getFileContent",n),console.log("ws: ",n),console.log("-----------");try{console.log(1)}catch(i){console.log(i)}e.$refs.upload.value=""}catch(l){return!1}},t.readAsBinaryString(o[0])}},beforeCreate:function(){},created:function(){}},p=f,m=(t("bb7e"),t("2877")),v=Object(m["a"])(p,r,h,!1,null,"114b0fa8",null),w=v.exports,_={components:{getFile:w},props:{dialogVisible:{type:Boolean,default:!1}},methods:{handleCancel:function(){this.$emit("onCancel")},handleFileContent:function(o){this.$emit("getFileContent",o)}}},b=_,C=Object(m["a"])(b,c,d,!1,null,"1f1684fe",null),$=C.exports,y=t("ca00"),G={components:{modalFileExcel:$},data:function(){return{start:"",piliangIsShow:!1,disabledButton:"",goodsData:[],newGoodsListOption:[],newGoods:{item_type_id:""},newSearchName:[]}},computed:{chooseGoodsPanel:function(){return this.$store.state.chooseGoodsPanel},goods:function(){return this.goodsData=Object(n["a"])(this.$store.state.goods.data),this.$store.state.goods}},created:function(){console.log(123),this.itemTypeGet();var o=t("6df7"),e=o.get("search");if(console.log(e),e){var s=Object(y["d"])(e);s&&(this.newSearchName=s)}},methods:{querySearch:function(o,e){console.log("query str: "+o);var t=o?this.newSearchName.filter(this.createFilter(o)):this.newSearchName;e(t)},createFilter:function(o){return function(e){return 0===e.value.toLowerCase().indexOf(o.toLowerCase())}},itemTypeGet:function(){var o=this;Object(l["a"])("/item_type/list").then((function(e){if(o.newGoodsListOption=e.data.itemTypes,o.newGoodsListOption=o.newGoodsListOption.filter((function(o){return"Accessible"===o.accessible})),console.log("newOption: ",o.newGoodsListOption),o.newGoodsListOption.push({id:"999",name:"其他",accessible:"NotAccessible",intro:"其他类型商品暂不支持自助下单，请联系客服",status:"OK"}),console.log(o.goods),o.goods.id){var t=null,s=!1;o.newGoodsListOption.map((function(e){e.id!=o.goods.id||(t=e),e.id==o.goods.id&&(s=!0)})),console.log("setGoods: ",t),s&&(o.$store.commit("changeGoodsInfo",{id:t.id,type:t.name,label:t.accessible}),console.log("重要的： ",o.$store.state.goods))}})).catch((function(o){console.log("e: ",o)}))},handleAddPiLiang:function(){this.piliangIsShow=!this.piliangIsShow},handlePiLiangCancel:function(){console.log(2),this.piliangIsShow=!1},showGoodsPanel:function(){this.$store.commit("showGoodsPanel")},hideGoodsPanel:function(){this.$store.commit("hideGoodsPanel")},initGoodsData:function(){this.goodsData=Object(i["a"])(this.goods.data)},handleDownLoad:function(){},handleFileContent:function(o){console.log("file: ",o);var e=[];e=o.filter((function(o,e){return 0!=e&&1!=e})),console.log("newfile: ",e);var t=[];e.map((function(o){var e={name:"",weight:"",volume:""};o.map((function(o,t){0==t?e.name=o:6==t?e.weight=0==o?"":o:7==t&&(e.volume=0==o?"":o)})),t.push(e),console.log("------")})),console.log("arrGoodsDataExcel: ",t),console.log("goodsData",this.goodsData);for(var s=0;s<t.length;s++){for(var a=0,n=!1,i=!1,l=0;l<this.goodsData.length;l++){if(console.log(""==t[s].name),""==t[s].name&&(console.log(123),i=!0),t[s].name==this.goodsData[l].name){console.log("qqqqq"),this.goodsData[l].weight=t[s].weight,this.goodsData[l].volume=t[s].volume,n=!0;break}a=s}this.goodsData.length>1&&(this.goodsData[0].name||this.goodsData.splice(0,1)),n||i||this.goodsData.push(t[a])}this.piliangIsShow=!this.piliangIsShow},closeGoodsData:function(){console.log(123456),this.hideGoodsPanel()},checkGoodsInfo:function(){var o=this;if(console.log("newgoods: ",this.$store.state.goods),""===this.goods.id)return this.$message.error(this.$t("itemtype.error_shop_select"));if(this.goods.id){var e=null;this.newGoodsListOption.map((function(t){t.id!=o.goods.id||(e=t)})),console.log("setGoods: ",e),this.$store.commit("changeGoodsInfo",{id:e.id,type:e.name,label:e.accessible}),console.log("重要的： ",this.$store.state.goods)}if("999"===this.goods.id)return this.$message.error(this.$t("message.massage3"));var s=!1;if(this.goodsData.map((function(e,t){e.weight<=0||e.volume<=0?(o.$refs.allCargoInform[t].setAttribute("class","border_wrong"),s=!0):o.$refs.allCargoInform[t].setAttribute("class","")})),s)return this.$message.error(this.$t("itemtype.error_shop_weight"));var a=JSON.parse(JSON.stringify(this.goodsData));console.log(a),console.log(a===this.goodsData),this.$store.commit("changeGoodsData",Object(i["a"])(this.goodsData)),console.log("-------------+++++++++++++++++++++++"),console.log("newgoods: ",this.$store.state.goods),this.goodsData.map((function(e){var t={value:e.name};console.log("searchObj: ",t),console.log("newSearchName: ",o.newSearchName),o.newSearchName.push(t)})),console.log("this.newSearchName: ",this.newSearchName);var n=t("6df7");n.set("search",this.newSearchName),console.log("nihao,goods",n.get("search")),this.hideGoodsPanel()},handleChangeGoodsInfo:function(o){"200110211209n6Td0oPd"==o||"200110211210jnd0onG7"==o||"200110211211j5rFonxu"==o||"200110211213h4REo9vD"==o||"200110211228iwe68urS"==o||"200110211230fVOe7TRx"==o||"2001102112429IdC90In"==o||"999"==o?this.$message.error(this.$t("message.massage3")):console.log(1)},handleDeleteGoodsItem:function(o){this.goodsData.splice(o,1)},handleAddGoodsItem:function(){this.goodsData.push({name:"",weight:"",volume:""})}},mounted:function(){}},x=G,D=(t("7a9d"),Object(m["a"])(x,s,a,!1,null,null,null));e["default"]=D.exports},bb7e:function(o,e,t){"use strict";var s=t("9123"),a=t.n(s);a.a},cdea:function(o,e,t){}}]);